{
    "general":
        {
            "target_folder": "/scratch/fml35/experiments/eval_classifier_grid/exp_007_gt_scale_gt_retrieval",
            "gpu": 0,
            "visualise": "True",
            "visualisations_per_category": 50000,
            "debug_set": "False",
            "debug_single": "True",
            "run_on_octopus": "True",
            "only_frames_with_gt_annotation": "True",
            "use_existing": ["segmentation","lines","retrieval","keypoints","R"],
            "use_existing_no": ["segmentation","lines","retrieval","keypoints","R","T"]
        },
    "dataset": 
        {
            "which_dataset": "scannet",
            "split": "s2"
        },
    "models": 
        {
            "elev": [0.0,15.0,30.0,45.0],
            "azim": [0.0,22.5,45.0,67.5,90.0,112.5,135.0,157.5,180.0,202.5,225.0,247.5,270.0,292.5,315.0,337.5],
            "dist": 1.2,
            "fov": 60.0,
            "img_size": 256,
            "max_edge_length_remesh": 0.15
        },
    "segmentation":
        {
            "use_gt": "roca",
            "threshold": 0.01,
            "boxiou_threshold": -1.0,
            "max_bbox_length": 150,
            "img_size": 256 
        },
    "line_detection":
        {
            "model_path": "/scratch/fml35/other_peoples_work/line_detection/mlsd_pytorch/models/mlsd_large_512_fp32.pth",
            "margin": 8,
            "increase_bbox_percent_whole_image": 0.05,
            "threshold_for_filtering_percent_whole_image": 0.04,
            "threshold_for_removing_duplicates": 0.02,
            "use_correct_lines": false
        },
    "retrieval":
        {
            "gt": "True",
            "style": "scene",
            "number_nearest_neighbours": 700,
            "only_different_models": false
        },
    "keypoints":
        {
            "detection":
                {
                    "weights_path": "/data/cornucopia/fml35/other_peoples_work/keypoints/SuperPoint/SuperPointPretrainedNetwork/superpoint_v1.pth",
                    "nms_dist": 4,
                    "conf_thresh": 0.015,
                    "nn_thresh": 0.5,
                    "size": [320,240],
                    "percent_expand_bbox_filter": 0.2
                },
            "matching":
                {
                    "top_n_retrieval": 1,
                    "crossCheck": true,
                    "k_matches_no_crossCheck": 1

                }
        },
    "pose_and_shape":
        {
            "pose":
                {
                    "use_correct_matches": "False",
                    "leave_out_matches": 0,
                    "max_number_keypoints_for_pose": 4,
                    "n_points_finding_best": 1000,
                    "max_poses_to_check": 3000000,
                    "batch_size": 1000,
                    "batch_size_optim": 1000,
                    "use_gt_z": "True",
                    "fraction_of_points_for_dist": 0.2,
                    "weighting_seg_vs_keypoints": 1.0,
                    "number_visualisations_per_object": 1,
                    "absolute_pose_algorithm": "upnp"
                },
            "shape":
                {
                    "optimise_shape": "False",
                    "planes": [[1,0,0.0,0],[0,1.0,0,0],[0,0,1,0.0]],
                    "bounds":
                        {
                            "stretching": 0.6,
                            "rotations": [5,60,20],
                            "delta_T": 0.2
                        },
                    "scipy_lbfgs":
                        {
                            "maxcor": 10,
                            "ftol": 1e-4,
                            "gtol": 1e-05,
                            "eps": 1e-08,
                            "maxfun": 15000,
                            "maxiter": 15000,
                            "maxls": 20,
                            "finite_diff_rel_step": "None"
                        }
                }
            },
    "R":
            {
                "choose_R": "closest_gt"
            },
    "pose_and_shape_probabilistic":
        {
            "use_probabilistic": "True",
            "sample_in_ground_plane": "False",
            "pose":
                {
                    "gt_z": "False",
                    "gt_R": false,
                    "sample_around_gt_z": true,
                    "tilt":{"range": 20,"steps": 20},
                    "elev":{"range": 45,"steps": 45},
                    "azim":{"range": 45,"steps": 45},
                    "x":{"range": 0.5,"steps": 10},
                    "y":{"range": 0.5,"steps": 10},
                    "z":{"range": 0.5,"steps": 10}
                },
            "ground_plane_limits":
                {
                    "xs": [-4,4,120],
                    "zs": [-4,4,120],
                    "camera_heights": [1.10,1.3,1.5]
                },
            "reproject_lines":
                {
                    "point_dir": "/scratch/fml35/experiments/leveraging_geometry_for_shape/test_output_all_s2/models/3d_points/3d_points_filtered_02_mean",
                    "top_n_for_translation": 500,
                    "multiplier_lines": 0.1,
                    "multiplier_bbox": 0.1,
                    "multiplier_points": 0.1,
                    "point_threshold": 0.97,
                    "area_threshold_percentage_side_length": 0.06,
                    "angle_threshold": 15,
                    "only_allow_single_mapping_to_3d": "True",
                    "min_length_line": 0.1,
                    "signal": "lines_classifier",
                    "min_line_overlap_percentage_side_length": 0.03,
                    "enforce_same_length": true,
                    "use_point_threshold": true,
                    "classifier_exp_path": "/scratch/fml35/experiments/classify_T_from_lines/runs_08_T_big/date_2022_05_19_time_19_00_39_canny_2d_depth_normal_reprojected",
                    "classifier_epoch": "400"
                }
        },

    "hierachial_grid_search":
        {
            "number_stages": 1,
            "stages": [
                        {"which":"T","info_T":{"center":"gt","range":2.0,"range_type": "absolute","steps_per_dim":40}}
                    ],
            "stages_old": [
                        {"which":"T","info_T":{"center":"gt","range":0.5,"range_type": "absolute","steps_per_dim":10}},
                        {"which":"S","info_S":{"center":"mode","range":"full","range_type": "relative","steps_per_dim":10}},
                        {"which":"T","info_T":{"center":"max","range":0.3,"range_type": "absolute","steps_per_dim":10}},
                        {"which":"S","info_S":{"center":"max","range":0.3,"range_type": "relative","steps_per_dim":10}}
                    ]
        },

    "evaluate_poses":
        {
            "metrics": ["F1@0.300000","F1@0.500000","F1@0.700000"],
            "thresholds": [50,55,60,65,70,75,80,85,90,95],
            "evaluate_all": false,
            "scannet":
                {
                    "max_t_error": 0.2,
                    "max_r_error": 20,
                    "max_s_error": 20
                }
        }
}